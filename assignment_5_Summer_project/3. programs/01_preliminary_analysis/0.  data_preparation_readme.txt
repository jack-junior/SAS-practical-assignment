
==============================
   DATA PREPARATION SUMMARY
==============================

We first imported the raw clinical trial dataset from a CSV file and carried out a series of data preparation steps to obtain a cleaned analysis dataset.

--------------------------------------------------
1. DATA IMPORT AND INITIAL CLEANING
--------------------------------------------------
- Imported dataset (dataset_merged.csv) into SAS
- Dropped redundant/duplicate variables:
  • Multiple site identifiers
  • Duplicate arm variables
  • Free-text assessment notes
  • Intermediate flags not needed

--------------------------------------------------
2. SELECTION OF VARIABLES OF INTEREST
--------------------------------------------------
- Extracted relevant variables:
  • Patient identifiers
  • Baseline clinical and psychosocial variables
  • Trial arm
  • Follow-up outcomes (Week 12, Week 24)
  • Demographic characteristics

--------------------------------------------------
3. DATA HARMONIZATION AND TYPE CONVERSION
--------------------------------------------------
- Corrected coding inconsistencies (e.g., “>90” → “90” in age)
- Converted numeric variables to categorical where appropriate (arm, wk12_dead, wk24_dead)
- Ensured categorical variables treated as factors

--------------------------------------------------
4. HANDLING MISSING AND REDUNDANT OBSERVATIONS
--------------------------------------------------
- Deleted rows with only patient ID and treatment arm
- Replaced empty strings (“”) with missing values in categorical variables

--------------------------------------------------
5. RECODING AND GROUPING OF CATEGORICAL VARIABLES
--------------------------------------------------
- Education (pthighedu): “Prefer not to answer” → “Other”
- Marital status (ptmargstat): “Prefer not to answer” + “Unknown/Not reported” → Missing
- Religion (ptrelgn): Rare categories (<15) → “Other”; “Unknown/Not reported” → Missing
- Race (race1): Recoded into 4 categories → White, Black/African American, Asian, Other


--------------------------------------------------
6. CONSTRUCTION OF STATE VARIABLES (T0, T12, T24)
--------------------------------------------------

After cleaning the dataset, we created state variables representing the patient status at baseline and follow-up visits:

- Baseline (T0): All patients who completed the baseline assessment were assigned to state `"A"` (active).
- Week 12 (T12):
  - "D" if the patient had died (`wk12_dead = 1`),
  - "A" if the FACT score change at week 12 (`fact_chg12`) was available,
  - "F" otherwise (functional attrition).
- Week 24 (T24):
  - "D" if the patient had died (`wk24_dead = 1`),
  - "A" if the FACT score change at week 24 (`fact_chg24`) was available,
  - "F" otherwise.

This classification provided the foundation for the multi-state modeling, allowing us to track patient 
transitions between states (Active → Functional Attrition → Death).


 --------------------------------------------------
6. Handling Missing Data
--------------------------------------------------
- We first quantified missingness in both numeric (PROC MEANS) and categorical (PROC FREQ) variables, and visualized 
the results with bar plots. 
- Variables with more than 15% missing values were removed to ensure data quality. For the remaining categorical variables with
limited missingness (pthighedu, ptmargstat), we applied mode imputation, replacing missing values with the most frequent category. 
- A final check confirmed that missing data was substantially reduced, resulting in a clean and consistent data…


 --------------------------------------------------
7. Output
--------------------------------------------------
- Cleaned dataset: data_SP.data_main_clean_imputed
- Harmonized variable types
- Reduced redundancy
- Standardized categories
- State variable
- Handle missingness
- Ready for statistical analysis




